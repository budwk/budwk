(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{679:function(t,e,o){"use strict";o.d(e,"i",(function(){return n})),o.d(e,"p",(function(){return r})),o.d(e,"s",(function(){return l})),o.d(e,"r",(function(){return c})),o.d(e,"q",(function(){return f})),o.d(e,"t",(function(){return d})),o.d(e,"o",(function(){return m})),o.d(e,"m",(function(){return v})),o.d(e,"k",(function(){return y})),o.d(e,"j",(function(){return h})),o.d(e,"l",(function(){return D})),o.d(e,"n",(function(){return $})),o.d(e,"f",(function(){return _})),o.d(e,"b",(function(){return w})),o.d(e,"e",(function(){return x})),o.d(e,"a",(function(){return k})),o.d(e,"h",(function(){return N})),o.d(e,"c",(function(){return C})),o.d(e,"g",(function(){return O})),o.d(e,"d",(function(){return V}));var n="/platform/sys/app/host_data",r="/platform/sys/app/os_data",l="/platform/sys/app/task/list",c="/platform/sys/app/task/create",f="/platform/sys/app/task/cannel/",d="/platform/sys/app/version",m="/platform/sys/app/log/level",v="/platform/sys/app/jar/list",y="/platform/sys/app/jar/delete/",h="/platform/sys/app/jar/create",D="/platform/sys/app/jar/disabled",$="/platform/sys/app/jar/search",_="/platform/sys/app/conf/list",w="/platform/sys/app/conf/delete/",x="/platform/sys/app/conf/get/",k="/platform/sys/app/conf/create",N="/platform/sys/app/conf/update",C="/platform/sys/app/conf/disabled",O="/platform/sys/app/conf/search",V="/platform/sys/app/conf/download/"},728:function(t,e,o){"use strict";o.r(e);o(91),o(44),o(35),o(26),o(69);var n=o(28),r=o(709),l=(o(710),o(711),o(712),o(55)),c=o(679);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}var d={components:{codemirror:r.codemirror},middleware:["authenticated","check_permissions"],data:function(){return{loading:!0,btnLoading:!1,listLoading:!1,addDialogVisible:!1,updateDialogVisible:!1,listData:[],pageData:{confName:"",pageNo:1,pageSize:10,totalCount:0,pageOrderName:"createdAt",pageOrderBy:"descending"},formData:{id:"",confData:""},cmOptions:{tabSize:4,mode:"properties",theme:"dracula",lineNumbers:!0,line:!0}}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(source,!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(source).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(l.c)({conf:function(t){return t.conf},siteInfo:function(t){return t.siteInfo},userInfo:function(t){return t.userInfo}}),{formRules:function(){var t={confName:[{required:!0,message:this.$t("sys.server.app.conf.form.confName"),trigger:"blur"}],confVersion:[{required:!0,message:this.$t("sys.server.app.conf.form.confVersion"),trigger:"blur"}]};return t}}),created:function(){this.listPage()},methods:{queryConfName:function(t,e){this.$axios.$post(c.g,{appName:t}).then((function(t){if(0===t.code){var o=t.data,n=[];o.forEach((function(t){n.push({value:t})})),e(n)}}))},openAdd:function(){this.formData={id:"",confData:""},this.addDialogVisible=!0},doAdd:function(){var t=this;this.$refs.addForm.validate((function(e){e&&(t.btnLoading=!0,t.$axios.$post(c.a,t.formData).then((function(e){t.btnLoading=!1,0===e.code&&(t.$message({message:e.msg,type:"success"}),t.addDialogVisible=!1,t.listPage())})))}))},openUpdate:function(t){var e=this;this.$axios.$get(c.e+t.id).then((function(t){0===t.code&&(e.formData=t.data,e.updateDialogVisible=!0)}))},doUpdate:function(){var t=this;this.$refs.updateForm.validate((function(e){e&&(t.btnLoading=!0,t.$axios.$post(c.h,t.formData).then((function(e){t.btnLoading=!1,0===e.code&&(t.$message({message:e.msg,type:"success"}),t.updateDialogVisible=!1,t.listPage())})))}))},disabledChange:function(t){var e=this;this.$axios.$post(c.c,t).then((function(o){0===o.code?e.$message({message:o.msg,type:"success"}):setTimeout((function(){t.disabled=!t.disabled}),300)}))},deleteRow:function(t){var e=this;this.$confirm(this.$t("sys.server.app.conf.delete"),this.$t("system.commons.txt.notice"),{confirmButtonText:this.$t("system.commons.button.ok"),cancelButtonText:this.$t("system.commons.button.cancel"),type:"warning"}).then((function(){e.btnLoading=!0,e.$axios.$delete(c.b+t.id).then((function(t){e.btnLoading=!1,0===t.code&&(e.$message({message:t.msg,type:"success"}),e.listPage())}))}))},doChangePage:function(t){this.pageData.pageNo=t,this.listPage()},doSizeChange:function(t){this.pageData.pageSize=t,this.listPage()},doPageSort:function(t){this.pageData.pageOrderName=t.prop,this.pageData.pageOrderBy=t.order,this.listPage()},listPage:function(){var t=this;this.listLoading=!0,this.$axios.$post(c.f,this.pageData).then((function(e){t.listLoading=!1,0===e.code&&(t.listData=e.data.list,t.pageData.totalCount=e.data.totalCount)}))},doSearch:function(){this.pageData.pageNo=1,this.listPage()},downloadFile:function(t,e){this.$axios.get(c.d+t,{responseType:"blob"}).then((function(t){var o=window.URL.createObjectURL(new Blob([t.data])),link=document.createElement("a");link.style.display="none",link.href=o,link.setAttribute("download",e),document.body.appendChild(link),link.click()}))},goBack:function(){this.$router.push("/platform/sys/app")}}},m=o(11),component=Object(m.a)(d,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"platform-content"},[o("h4",{staticClass:"platform-content-title"},[o("span",[t._v(t._s(t.$t("sys.server.app.conf"))+"\n      "),o("el-button",{attrs:{type:"text",icon:"fa fa-arrow-circle-left"},on:{click:t.goBack}},[t._v(" "+t._s(t.$t("system.commons.button.goback")))])],1),t._v(" "),o("div",{staticClass:"platform-list-op"},[o("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"sys.server.app.conf",expression:"'sys.server.app.conf'"}],attrs:{size:"small",type:"primary"},on:{click:t.openAdd}},[t._v("\n        "+t._s(t.$t("sys.server.app.conf.create"))+"\n      ")])],1)]),t._v(" "),o("div",{staticClass:"platform-content-info"},[o("div",{staticClass:"platform-content-search"},[o("el-form",{staticClass:"platform-content-search-form",attrs:{inline:!0,model:t.pageData}},[o("el-form-item",{attrs:{label:t.$t("sys.server.app.conf.form.confName")}},[o("el-input",{staticClass:"platform-content-search-input",attrs:{placeholder:t.$t("sys.server.app.conf.form.confName")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.doSearch(e)}},model:{value:t.pageData.confName,callback:function(e){t.$set(t.pageData,"confName",e)},expression:"pageData.confName"}})],1),t._v(" "),o("div",{staticClass:"platform-content-search-op"},[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.doSearch}},[t._v("\n            "+t._s(t.$t("system.commons.button.search"))+"\n          ")])],1)],1)],1),t._v(" "),o("div",{staticClass:"platform-content-list"},[o("div",{staticClass:"platform-content-list-table"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.listData,stripe:""},on:{"sort-change":t.doPageSort}},[o("el-table-column",{attrs:{sortable:"",prop:"confName",label:t.$t("sys.server.app.conf.form.confName"),"header-align":"center",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{sortable:"",prop:"confVersion",label:t.$t("sys.server.app.conf.form.confVersion"),width:"100"}}),t._v(" "),o("el-table-column",{attrs:{label:t.$t("sys.server.app.conf.form.fileDownload"),"header-align":"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){t.downloadFile(e.row.id,e.row.confName+"-"+e.row.confVersion)}}},[t._v(t._s(e.row.confName)+"-"+t._s(e.row.confVersion)+".properties")])]}}])}),t._v(" "),o("el-table-column",{attrs:{sortable:"",prop:"createdAt",label:t.$t("system.commons.txt.createdAt"),"header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(t._f("moment")(e.row.createdAt,"datetime"))+"\n            ")]}}])}),t._v(" "),o("el-table-column",{attrs:{sortable:"",prop:"createdBy",label:t.$t("system.commons.txt.createdBy"),"header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.user.loginname)+"\n            ")]}}])}),t._v(" "),o("el-table-column",{attrs:{sortable:"",prop:"disabled",label:t.$t("system.commons.txt.disabled"),"header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-switch",{attrs:{size:"small","active-value":!1,"inactive-value":!0,"active-color":"green","inactive-color":"red"},on:{change:function(o){return t.disabledChange(e.row)}},model:{value:e.row.disabled,callback:function(o){t.$set(e.row,"disabled",o)},expression:"scope.row.disabled"}})]}}])}),t._v(" "),o("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",label:t.$t("system.commons.txt.ext")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"sys.server.app.conf.update",expression:"'sys.server.app.conf.update'"}],attrs:{type:"text",size:"small"},nativeOn:{click:function(o){return o.preventDefault(),t.openUpdate(e.row)}}},[t._v("\n                "+t._s(t.$t("system.commons.button.update.mini"))+"\n              ")]),t._v(" "),o("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"sys.server.app.conf.delete",expression:"'sys.server.app.conf.delete'"}],staticClass:"button-delete-color",attrs:{type:"text",size:"small"},nativeOn:{click:function(o){return o.preventDefault(),t.deleteRow(e.row)}}},[t._v("\n                "+t._s(t.$t("system.commons.button.delete.mini"))+"\n              ")])]}}])})],1)],1),t._v(" "),o("div",{staticClass:"platform-content-list-pagination"},[o("el-pagination",{staticClass:"platform-pagenation",attrs:{"current-page":t.pageData.pageNo,"page-size":t.pageData.pageSize,total:t.pageData.totalCount,background:"","page-sizes":[10,20,30,50],layout:"sizes, prev, pager, next"},on:{"current-change":t.doChangePage,"size-change":t.doSizeChange}})],1)])]),t._v(" "),o("el-dialog",{attrs:{title:t.$t("sys.server.app.conf.create"),visible:t.addDialogVisible,"close-on-click-modal":!1,width:"70%"},on:{"update:visible":function(e){t.addDialogVisible=e}}},[o("el-form",{ref:"addForm",attrs:{model:t.formData,rules:t.formRules,size:"small","label-width":"120px"}},[o("el-form-item",{attrs:{prop:"confName",label:t.$t("sys.server.app.conf.form.confName")}},[o("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"220px"},attrs:{"fetch-suggestions":t.queryConfName,placeholder:t.$t("sys.server.app.conf.form.confName.placeholder")},model:{value:t.formData.confName,callback:function(e){t.$set(t.formData,"confName",e)},expression:"formData.confName"}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"confVersion",label:t.$t("sys.server.app.conf.form.confVersion")}},[o("el-input",{staticStyle:{width:"220px"},attrs:{maxlength:"20",placeholder:t.$t("sys.server.app.conf.form.confVersion.placeholder"),"auto-complete":"off",tabindex:"2",type:"text"},model:{value:t.formData.confVersion,callback:function(e){t.$set(t.formData,"confVersion",e)},expression:"formData.confVersion"}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"confData",label:t.$t("sys.server.app.conf.form.confData")}},[o("no-ssr",{attrs:{placeholder:"Codemirror Loading..."}},[o("codemirror",{attrs:{options:t.cmOptions},model:{value:t.formData.confData,callback:function(e){t.$set(t.formData,"confData",e)},expression:"formData.confData"}})],1)],1)],1),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v(t._s(t.$t("system.commons.button.cancel")))]),t._v(" "),o("el-button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:t.doAdd}},[t._v(t._s(t.$t("system.commons.button.ok")))])],1)],1),t._v(" "),o("el-dialog",{attrs:{title:t.$t("sys.server.app.conf.update"),visible:t.updateDialogVisible,"close-on-click-modal":!1,width:"70%"},on:{"update:visible":function(e){t.updateDialogVisible=e}}},[o("el-form",{ref:"updateForm",attrs:{model:t.formData,rules:t.formRules,size:"small","label-width":"120px"}},[o("el-form-item",{attrs:{prop:"confName",label:t.$t("sys.server.app.conf.form.confName")}},[o("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"220px"},attrs:{"fetch-suggestions":t.queryConfName,placeholder:t.$t("sys.server.app.conf.form.confName.placeholder")},model:{value:t.formData.confName,callback:function(e){t.$set(t.formData,"confName",e)},expression:"formData.confName"}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"confVersion",label:t.$t("sys.server.app.conf.form.confVersion")}},[o("el-input",{staticStyle:{width:"220px"},attrs:{maxlength:"20",placeholder:t.$t("sys.server.app.conf.form.confVersion.placeholder"),"auto-complete":"off",tabindex:"2",type:"text"},model:{value:t.formData.confVersion,callback:function(e){t.$set(t.formData,"confVersion",e)},expression:"formData.confVersion"}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"confData",label:t.$t("sys.server.app.conf.form.confData")}},[o("no-ssr",{attrs:{placeholder:"Codemirror Loading..."}},[o("codemirror",{attrs:{options:t.cmOptions},model:{value:t.formData.confData,callback:function(e){t.$set(t.formData,"confData",e)},expression:"formData.confData"}})],1)],1)],1),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.updateDialogVisible=!1}}},[t._v(t._s(t.$t("system.commons.button.cancel")))]),t._v(" "),o("el-button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:t.doUpdate}},[t._v(t._s(t.$t("system.commons.button.ok")))])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);