(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{679:function(e,t,r){"use strict";r.d(t,"i",(function(){return o})),r.d(t,"p",(function(){return n})),r.d(t,"s",(function(){return l})),r.d(t,"r",(function(){return c})),r.d(t,"q",(function(){return f})),r.d(t,"t",(function(){return d})),r.d(t,"o",(function(){return m})),r.d(t,"m",(function(){return h})),r.d(t,"k",(function(){return v})),r.d(t,"j",(function(){return y})),r.d(t,"l",(function(){return _})),r.d(t,"n",(function(){return $})),r.d(t,"f",(function(){return j})),r.d(t,"b",(function(){return D})),r.d(t,"e",(function(){return w})),r.d(t,"a",(function(){return x})),r.d(t,"h",(function(){return k})),r.d(t,"c",(function(){return S})),r.d(t,"g",(function(){return P})),r.d(t,"d",(function(){return C}));var o="/platform/sys/app/host_data",n="/platform/sys/app/os_data",l="/platform/sys/app/task/list",c="/platform/sys/app/task/create",f="/platform/sys/app/task/cannel/",d="/platform/sys/app/version",m="/platform/sys/app/log/level",h="/platform/sys/app/jar/list",v="/platform/sys/app/jar/delete/",y="/platform/sys/app/jar/create",_="/platform/sys/app/jar/disabled",$="/platform/sys/app/jar/search",j="/platform/sys/app/conf/list",D="/platform/sys/app/conf/delete/",w="/platform/sys/app/conf/get/",x="/platform/sys/app/conf/create",k="/platform/sys/app/conf/update",S="/platform/sys/app/conf/disabled",P="/platform/sys/app/conf/search",C="/platform/sys/app/conf/download/"},680:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return n}));var o="/platform/pub/file/upload/image",n="/platform/pub/file/upload/file"},694:function(e,t,r){},714:function(e,t,r){"use strict";var o=r(694);r.n(o).a},731:function(e,t,r){"use strict";r.r(t);r(91),r(44),r(35),r(26),r(69),r(68);var o=r(28),n=r(55),l=r(680),c=r(679);function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var d={middleware:["authenticated","check_permissions"],data:function(){return{loading:!0,btnLoading:!1,listLoading:!1,addDialogVisible:!1,updateDialogVisible:!1,listData:[],pageData:{appName:"",pageNo:1,pageSize:10,totalCount:0,pageOrderName:"createdAt",pageOrderBy:"descending"},formData:{id:"",fileSize:0,filePath:""},fileUploadFlag:!1,fileUploadPercent:0,fileUploadUrl:"/api/1.0.0"+l.a}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(source,!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(source).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(n.c)({conf:function(e){return e.conf},siteInfo:function(e){return e.siteInfo},userInfo:function(e){return e.userInfo}}),{formRules:function(){var e={appName:[{required:!0,message:this.$t("sys.server.app.jar.form.appName"),trigger:"blur"}],appVersion:[{required:!0,message:this.$t("sys.server.app.jar.form.appVersion"),trigger:"blur"}],filePath:[{required:!0,message:this.$t("sys.server.app.jar.form.filePath"),trigger:"blur"}]};return e}}),created:function(){this.listPage()},methods:{queryAppName:function(e,t){this.$axios.$post(c.n,{appName:e}).then((function(e){if(0===e.code){var r=e.data,o=[];r.forEach((function(e){o.push({value:e})})),t(o)}}))},openAdd:function(){this.formData={},this.addDialogVisible=!0},doAdd:function(){var e=this;this.$refs.addForm.validate((function(t){t&&(e.btnLoading=!0,e.$axios.$post(c.j,e.formData).then((function(t){e.btnLoading=!1,0===t.code&&(e.$message({message:t.msg,type:"success"}),e.addDialogVisible=!1,e.listPage())})))}))},beforeJarUpload:function(e){var t=e.size/1024/1024<300;return".jar"!==e.name.substring(e.name.lastIndexOf("."),e.name.length)?(this.$message.error(this.$t("sys.server.app.jar.form.fileUpload.tip4")),!1):!!t||(this.$message.error(this.$t("sys.server.app.jar.form.fileUpload.tip5")),!1)},handleJarSuccess:function(e,t,r){0===e.code?(this.$set(this.formData,"fileSize",e.data.file_size),this.$set(this.formData,"filePath",e.data.file_url)):(this.$message({message:e.msg,type:"error"}),this.$set(this.formData,"fileSize",0),this.$set(this.formData,"filePath","")),this.fileUploadFlag=!1},uploadFileProcess:function(e,t,r){this.fileUploadFlag=!0,this.fileUploadPercent=parseInt(e.percent)},disabledChange:function(e){var t=this;this.$axios.$post(c.l,e).then((function(r){0===r.code?t.$message({message:r.msg,type:"success"}):setTimeout((function(){e.disabled=!e.disabled}),300)}))},deleteRow:function(e){var t=this;this.$confirm(this.$t("sys.server.app.jar.delete"),this.$t("system.commons.txt.notice"),{confirmButtonText:this.$t("system.commons.button.ok"),cancelButtonText:this.$t("system.commons.button.cancel"),type:"warning"}).then((function(){t.btnLoading=!0,t.$axios.$delete(c.k+e.id).then((function(e){t.btnLoading=!1,0===e.code&&(t.$message({message:e.msg,type:"success"}),t.listPage())}))}))},doChangePage:function(e){this.pageData.pageNo=e,this.listPage()},doSizeChange:function(e){this.pageData.pageSize=e,this.listPage()},doPageSort:function(e){this.pageData.pageOrderName=e.prop,this.pageData.pageOrderBy=e.order,this.listPage()},listPage:function(){var e=this;this.listLoading=!0,this.$axios.$post(c.m,this.pageData).then((function(t){e.listLoading=!1,0===t.code&&(e.listData=t.data.list,e.pageData.totalCount=t.data.totalCount)}))},doSearch:function(){this.pageData.pageNo=1,this.listPage()},goBack:function(){this.$router.push("/platform/sys/app")}}},m=(r(714),r(11)),component=Object(m.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"platform-content"},[r("h4",{staticClass:"platform-content-title"},[r("span",[e._v(e._s(e.$t("sys.server.app.jar"))+"\n      "),r("el-button",{attrs:{type:"text",icon:"fa fa-arrow-circle-left"},on:{click:e.goBack}},[e._v(" "+e._s(e.$t("system.commons.button.goback")))])],1),e._v(" "),r("div",{staticClass:"platform-list-op"},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"sys.server.app.jar",expression:"'sys.server.app.jar'"}],attrs:{size:"small",type:"primary"},on:{click:e.openAdd}},[e._v("\n        "+e._s(e.$t("sys.server.app.jar.create"))+"\n      ")])],1)]),e._v(" "),r("div",{staticClass:"platform-content-info"},[r("div",{staticClass:"platform-content-search"},[r("el-form",{staticClass:"platform-content-search-form",attrs:{inline:!0,model:e.pageData}},[r("el-form-item",{attrs:{label:e.$t("sys.server.app.jar.form.appName")}},[r("el-input",{staticClass:"platform-content-search-input",attrs:{placeholder:e.$t("sys.server.app.jar.form.appName")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearch(t)}},model:{value:e.pageData.appName,callback:function(t){e.$set(e.pageData,"appName",t)},expression:"pageData.appName"}})],1),e._v(" "),r("div",{staticClass:"platform-content-search-op"},[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.doSearch}},[e._v("\n            "+e._s(e.$t("system.commons.button.search"))+"\n          ")])],1)],1)],1),e._v(" "),r("div",{staticClass:"platform-content-list"},[r("div",{staticClass:"platform-content-list-table"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.listData,stripe:""},on:{"sort-change":e.doPageSort}},[r("el-table-column",{attrs:{sortable:"",prop:"appName",label:e.$t("sys.server.app.jar.form.appName"),"header-align":"center",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"appVersion",label:e.$t("sys.server.app.jar.form.appVersion"),width:"100"}}),e._v(" "),r("el-table-column",{attrs:{prop:"fileSize",label:e.$t("sys.server.app.jar.form.fileSize"),width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.fileSize/1024/1024).toFixed(2))+"MB\n            ")]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"filePath",label:e.$t("sys.server.app.jar.form.filePath"),"header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.appName)+"-"+e._s(t.row.appVersion)+".jar\n            ")]}}])}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"createdAt",label:e.$t("system.commons.txt.createdAt"),"header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("moment")(t.row.createdAt,"datetime"))+"\n            ")]}}])}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"createdBy",label:e.$t("system.commons.txt.createdBy"),"header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.user.loginname)+"\n            ")]}}])}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"disabled",label:e.$t("system.commons.txt.disabled"),"header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{size:"small","active-value":!1,"inactive-value":!0,"active-color":"green","inactive-color":"red"},on:{change:function(r){return e.disabledChange(t.row)}},model:{value:t.row.disabled,callback:function(r){e.$set(t.row,"disabled",r)},expression:"scope.row.disabled"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",label:e.$t("system.commons.txt.ext")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"sys.server.app.jar.delete",expression:"'sys.server.app.jar.delete'"}],staticClass:"button-delete-color",attrs:{type:"text",size:"small"},nativeOn:{click:function(r){return r.preventDefault(),e.deleteRow(t.row)}}},[e._v("\n                "+e._s(e.$t("system.commons.button.delete.mini"))+"\n              ")])]}}])})],1)],1),e._v(" "),r("div",{staticClass:"platform-content-list-pagination"},[r("el-pagination",{staticClass:"platform-pagenation",attrs:{"current-page":e.pageData.pageNo,"page-size":e.pageData.pageSize,total:e.pageData.totalCount,background:"","page-sizes":[10,20,30,50],layout:"sizes, prev, pager, next"},on:{"current-change":e.doChangePage,"size-change":e.doSizeChange}})],1)])]),e._v(" "),r("el-dialog",{attrs:{title:e.$t("sys.server.app.jar.create"),visible:e.addDialogVisible,"close-on-click-modal":!1,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t}}},[r("el-form",{ref:"addForm",attrs:{model:e.formData,rules:e.formRules,size:"small","label-width":"120px"}},[r("el-form-item",{attrs:{prop:"appName",label:e.$t("sys.server.app.jar.form.appName")}},[r("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"220px"},attrs:{"fetch-suggestions":e.queryAppName,placeholder:e.$t("sys.server.app.jar.form.appName.placeholder")},model:{value:e.formData.appName,callback:function(t){e.$set(e.formData,"appName",t)},expression:"formData.appName"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"appVersion",label:e.$t("sys.server.app.jar.form.appVersion")}},[r("el-input",{staticStyle:{width:"220px"},attrs:{maxlength:"20",placeholder:e.$t("sys.server.app.jar.form.appVersion.placeholder"),"auto-complete":"off",tabindex:"2",type:"text"},model:{value:e.formData.appVersion,callback:function(t){e.$set(e.formData,"appVersion",t)},expression:"formData.appVersion"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"filePath",label:e.$t("sys.server.app.jar.form.fileUpload")}},[e.formData.fileSize&&0!==e.formData.fileSize?e._e():r("el-upload",{staticClass:"upload-demo",staticStyle:{height:"180px"},attrs:{drag:"",action:e.fileUploadUrl,name:"Filedata","show-file-list":!1,"before-upload":e.beforeJarUpload,"on-success":e.handleJarSuccess,"on-progress":e.uploadFileProcess}},[e.fileUploadFlag?e._e():r("i",{staticClass:"el-icon-upload"}),e._v(" "),e.fileUploadFlag?e._e():r("div",{staticClass:"el-upload__text"},[e._v(e._s(e.$t("sys.server.app.jar.form.fileUpload.tip1"))),r("em",[e._v(e._s(e.$t("sys.server.app.jar.form.fileUpload.tip2")))])]),e._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.$t("sys.server.app.jar.form.fileUpload.tip3")))]),e._v(" "),1==e.fileUploadFlag?r("el-progress",{staticStyle:{"margin-top":"20px"},attrs:{type:"circle",percentage:e.fileUploadPercent}}):e._e()],1),e._v(" "),e.formData.fileSize>0?r("div",{staticStyle:{color:"green","font-size":"12px"}},[e._v("\n          "+e._s(e.$t("sys.server.app.jar.form.fileSize"))+": "+e._s((e.formData.fileSize/1024/1024).toFixed(2))+"MB\n        ")]):e._e()],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v(e._s(e.$t("system.commons.button.cancel")))]),e._v(" "),r("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.doAdd}},[e._v(e._s(e.$t("system.commons.button.ok")))])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);