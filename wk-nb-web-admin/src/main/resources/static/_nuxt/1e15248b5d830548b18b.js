(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{719:function(e,t,l){"use strict";l.r(t);l(68),l(27);var n={middleware:["authenticated","check_permissions"],data:function(){return{loading:!0,btnLoading:!1,listLoading:!1,dialogVisible:!1,dialogTitle:"",dialgeLocale:!1,listData:[],localeData:[],localeModel:{localeManageData:[]},pageData:{locale:"zh-CN",lang_key:"",lang_value:"",pageNo:1,pageSize:10,totalCount:0,pageOrderName:"createdAt",pageOrderBy:"descending"},formData:{lang_value:{}}}},computed:{saveRules:function(){var e={lang_key:[{required:!0,message:this.$t("sys.lang.form.lang_key"),trigger:"blur"}]};return e},localeRules:function(){var e={name:[{required:!0,message:this.$t("sys.lang.form.name"),trigger:"blur"}],locale:[{required:!0,message:this.$t("sys.lang.form.locale"),trigger:"blur"}]};return e}},created:function(){this.listLocale(),this.listPage()},methods:{openLocale:function(){var e,data;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$axios.$get("/platform/sys/lang/locale",{}));case 2:e=t.sent,(data=e.data)&&(this.localeModel.localeManageData=data),this.dialgeLocale=!0;case 6:case"end":return t.stop()}}),null,this)},addLocale:function(){this.localeModel.localeManageData.push({isEdit:!0})},cancelLocale:function(e){this.localeModel.localeManageData.splice(e,1)},saveLocale:function(e){var t=this;this.$refs.localeForm.validate((function(l){l&&t.$axios.$post("/platform/sys/lang/language_create",e).then((function(l){t.btnLoading=!1,0===l.code&&(t.$message({message:l.msg,type:"success"}),e.isEdit=!1,t.listLocale())}))}))},deleteLocale:function(e,t){var l=this;this.$confirm(this.$t("sys.lang.form.locale.delete",{name:t.name}),this.$t("system.commons.txt.notice"),{confirmButtonText:this.$t("system.commons.button.ok"),cancelButtonText:this.$t("system.commons.button.cancel"),type:"warning"}).then((function(){l.$axios.$post("/platform/sys/lang/language_delete",t).then((function(t){0===t.code&&(l.$message({message:t.msg,type:"success"}),l.localeModel.localeManageData.splice(e,1),l.listLocale())}))}))},openAdd:function(){this.formData={lang_value:{}},this.dialogTitle=this.$t("sys.lang.form.title.add"),this.dialogVisible=!0},doSave:function(){var e=this;this.$refs.saveForm.validate((function(t){t&&(e.btnLoading=!0,e.$axios.$post("/platform/sys/lang/create_or_update",e.formData).then((function(t){e.btnLoading=!1,0===t.code&&(e.$message({message:t.msg,type:"success"}),e.dialogVisible=!1,e.listPage())})))}))},openUpdate:function(e){var t=this;this.$axios.$post("/platform/sys/lang/get",e).then((function(e){0===e.code&&(t.formData=e.data,t.dialogTitle=t.$t("sys.lang.update"),t.dialogVisible=!0)}))},deleteRow:function(e){var t=this;this.$confirm(this.$t("sys.lang.lang_key.delete",{lang_key:e.lang_key}),this.$t("system.commons.txt.notice"),{confirmButtonText:this.$t("system.commons.button.ok"),cancelButtonText:this.$t("system.commons.button.cancel"),type:"warning"}).then((function(){t.btnLoading=!0,t.$axios.$post("/platform/sys/lang/delete",e).then((function(e){t.btnLoading=!1,0===e.code&&(t.$message({message:e.msg,type:"success"}),t.listPage())}))}))},listLocale:function(){var e,data;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$axios.$get("/platform/sys/lang/locale",{}));case 2:e=t.sent,(data=e.data)&&(this.localeData=data);case 5:case"end":return t.stop()}}),null,this)},doChangePage:function(e){this.pageData.pageNo=e,this.listPage()},doSizeChange:function(e){this.pageData.pageSize=e,this.listPage()},doPageSort:function(e){this.pageData.pageOrderName=e.prop,this.pageData.pageOrderBy=e.order,this.listPage()},listPage:function(){var e=this;this.listLoading=!0,this.$axios.$post("/platform/sys/lang/list",this.pageData).then((function(t){e.listLoading=!1,0===t.code&&(e.listData=t.data.list,e.pageData.totalCount=t.data.totalCount)}))},doSearch:function(){this.pageData.pageNo=1,this.listPage()}}},o=l(11),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"platform-content"},[l("h4",{staticClass:"platform-content-title"},[l("span",[e._v(e._s(e.$t("sys.config.lang")))]),e._v(" "),l("div",{staticClass:"platform-list-op"},[l("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"sys.config.lang.create",expression:"'sys.config.lang.create'"}],attrs:{size:"small",type:"primary"},on:{click:e.openAdd}},[e._v("\n        "+e._s(e.$t("sys.lang.form.add"))+"\n      ")]),e._v(" "),l("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"sys.config.lang.create",expression:"'sys.config.lang.create'"}],attrs:{size:"small"},on:{click:e.openLocale}},[e._v("\n        "+e._s(e.$t("sys.lang.form.locale.manage"))+"\n      ")])],1)]),e._v(" "),l("div",{staticClass:"platform-content-info"},[l("div",{staticClass:"platform-content-search"},[l("el-form",{staticClass:"platform-content-search-form",attrs:{inline:!0,model:e.pageData}},[l("el-form-item",{attrs:{label:e.$t("sys.lang.form.selectLang")}},[l("el-select",{attrs:{placeholder:e.$t("sys.lang.form.selectLang")},model:{value:e.pageData.locale,callback:function(t){e.$set(e.pageData,"locale",t)},expression:"pageData.locale"}},e._l(e.localeData,(function(e){return l("el-option",{key:e.locale,attrs:{label:e.name,value:e.locale}})})),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"Key"}},[l("el-input",{staticClass:"platform-content-search-input",attrs:{placeholder:"Key"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearch(t)}},model:{value:e.pageData.lang_key,callback:function(t){e.$set(e.pageData,"lang_key",t)},expression:"pageData.lang_key"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"Value"}},[l("el-input",{staticClass:"platform-content-search-input",attrs:{placeholder:"Value"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearch(t)}},model:{value:e.pageData.lang_value,callback:function(t){e.$set(e.pageData,"lang_value",t)},expression:"pageData.lang_value"}})],1),e._v(" "),l("div",{staticClass:"platform-content-search-op"},[l("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.doSearch}},[e._v("\n            "+e._s(e.$t("system.commons.button.search"))+"\n          ")])],1)],1)],1),e._v(" "),l("div",{staticClass:"platform-content-list"},[l("div",{staticClass:"platform-content-list-table"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.listData,stripe:""},on:{"sort-change":e.doPageSort}},[l("el-table-column",{attrs:{prop:"lang_key",label:"Key",sortable:""}}),e._v(" "),l("el-table-column",{attrs:{prop:"lang_value",label:"Value",sortable:""}}),e._v(" "),l("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",label:e.$t("system.commons.txt.ext"),width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"sys.config.lang.update",expression:"'sys.config.lang.update'"}],attrs:{type:"text",size:"small"},nativeOn:{click:function(l){return l.preventDefault(),e.openUpdate(t.row)}}},[e._v("\n                "+e._s(e.$t("system.commons.button.update.mini"))+"\n              ")]),e._v(" "),l("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"sys.config.lang.delete",expression:"'sys.config.lang.delete'"}],staticClass:"button-delete-color",attrs:{type:"text",size:"small"},nativeOn:{click:function(l){return l.preventDefault(),e.deleteRow(t.row)}}},[e._v("\n                "+e._s(e.$t("system.commons.button.delete.mini"))+"\n              ")])]}}])})],1)],1),e._v(" "),l("div",{staticClass:"platform-content-list-pagination"},[l("el-pagination",{staticClass:"platform-pagenation",attrs:{"current-page":e.pageData.pageNo,"page-size":e.pageData.pageSize,total:e.pageData.totalCount,background:"","page-sizes":[10,20,30,50],layout:"sizes, prev, pager, next"},on:{"current-change":e.doChangePage,"size-change":e.doSizeChange}})],1)])]),e._v(" "),l("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("el-form",{ref:"saveForm",attrs:{model:e.formData,rules:e.saveRules,"label-width":"120px"}},[l("el-form-item",{attrs:{label:e.$t("sys.lang.form.lang_key"),prop:"lang_key"}},[l("el-input",{attrs:{tabindex:"1",autofocus:"autofocus"},model:{value:e.formData.lang_key,callback:function(t){e.$set(e.formData,"lang_key",t)},expression:"formData.lang_key"}})],1),e._v(" "),e._l(e.localeData,(function(t,n){return l("el-form-item",{key:t.locale,attrs:{label:t.name}},[l("el-input",{attrs:{tabindex:""+(n+2),autofocus:"autofocus"},model:{value:e.formData.lang_value[t.locale],callback:function(l){e.$set(e.formData.lang_value,t.locale,l)},expression:"formData.lang_value[item.locale]"}})],1)}))],2),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{type:"default"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("system.commons.button.cancel")))]),e._v(" "),l("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.doSave}},[e._v(e._s(e.$t("system.commons.button.ok")))])],1)],1),e._v(" "),l("el-dialog",{attrs:{title:e.$t("sys.lang.form.locale.manage"),visible:e.dialgeLocale,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialgeLocale=t}}},[l("div",{staticStyle:{float:"right","padding-right":"15px"}},[l("el-button",{attrs:{type:"text"},on:{click:e.addLocale}},[e._v(e._s(e.$t("system.commons.button.add")))])],1),e._v(" "),l("el-form",{ref:"localeForm",attrs:{model:e.localeModel,size:"small"}},[l("el-table",{attrs:{data:e.localeModel.localeManageData,stripe:""}},[l("el-table-column",{staticClass:"el-form-item",attrs:{label:e.$t("sys.lang.form.name"),sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?l("span",[l("el-form-item",{attrs:{prop:"localeManageData."+t.$index+".name",rules:e.localeRules.name}},[l("el-input",{attrs:{size:"mini",maxlength:"20"},model:{value:t.row.name,callback:function(l){e.$set(t.row,"name",l)},expression:"scope.row.name"}})],1)],1):l("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),l("el-table-column",{staticClass:"el-form-item",attrs:{label:e.$t("sys.lang.form.locale"),sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?l("span",[l("el-form-item",{attrs:{prop:"localeManageData."+t.$index+".locale",rules:e.localeRules.locale}},[l("el-input",{attrs:{size:"mini",maxlength:"20"},model:{value:t.row.locale,callback:function(l){e.$set(t.row,"locale",l)},expression:"scope.row.locale"}})],1)],1):l("span",[e._v(e._s(t.row.locale))])]}}])}),e._v(" "),l("el-table-column",{attrs:{fixed:"right",label:e.$t("system.commons.txt.ext"),width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?l("span",[l("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(l){return l.preventDefault(),e.saveLocale(t.row)}}},[e._v("\n                "+e._s(e.$t("system.commons.button.save.mini"))+"\n              ")]),e._v(" "),l("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(l){return l.preventDefault(),e.cancelLocale(t.$index)}}},[e._v("\n                "+e._s(e.$t("system.commons.button.cancel.mini"))+"\n              ")])],1):l("span",[l("el-button",{staticClass:"button-delete-color",attrs:{type:"text",size:"small"},nativeOn:{click:function(l){return l.preventDefault(),e.deleteLocale(t.$index,t.row)}}},[e._v("\n                "+e._s(e.$t("system.commons.button.delete.mini"))+"\n              ")])],1)]}}])})],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{type:"default"},on:{click:function(t){e.dialgeLocale=!1}}},[e._v(e._s(e.$t("system.commons.button.close")))])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);