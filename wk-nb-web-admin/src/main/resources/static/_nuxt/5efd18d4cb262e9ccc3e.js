(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{687:function(e,t,o){},701:function(e,t,o){"use strict";var n=o(687);o.n(n).a},720:function(e,t,o){"use strict";o.r(t);o(132),o(133),o(26);var n=o(0),l=o.n(n),r={middleware:["authenticated","check_permissions"],data:function(){return{loading:!0,btnLoading:!1,listLoading:!1,listData:[],searchDate:[],pageData:{searchType:"",searchDate:"",pageNo:1,pageSize:10,totalCount:0,pageOrderName:"createdAt",pageOrderBy:"descending"},logType:[{value:"",label:this.$t("sys.manage.log.form.type.all")},{value:"platform",label:this.$t("sys.manage.log.form.type.platform")},{value:"info",label:this.$t("sys.manage.log.form.type.info")},{value:"api",label:this.$t("sys.manage.log.form.type.api")}],pickerOptions:{disabledDate:function(time){var e=l()().add(-3,"months").valueOf();return time.getTime()>Date.now()||time.getTime()<e},shortcuts:[{text:this.$t("sys.manage.log.oneweek"),onClick:function(e){var t=new Date,o=new Date,n=l()().add(-1,"weeks").valueOf();o.setTime(n),e.$emit("pick",[o,t])}},{text:this.$t("sys.manage.log.onemonth"),onClick:function(e){var t=new Date,o=new Date,n=l()().add(-1,"months").valueOf();o.setTime(n),e.$emit("pick",[o,t])}},{text:this.$t("sys.manage.log.threemonth"),onClick:function(e){var t=new Date,o=new Date,n=l()().add(-3,"months").valueOf();o.setTime(n),e.$emit("pick",[o,t])}}]}}},computed:{getLocale:function(){return this.$i18n.locale}},watch:{getLocale:function(e,t){this.logType=[{value:"",label:this.$t("sys.manage.log.form.type.all")},{value:"platform",label:this.$t("sys.manage.log.form.type.platform")},{value:"info",label:this.$t("sys.manage.log.form.type.info")},{value:"api",label:this.$t("sys.manage.log.form.type.api")}],this.pickerOptions.shortcuts=[{text:this.$t("sys.manage.log.oneweek"),onClick:function(e){var t=new Date,o=new Date,n=l()().add(-1,"weeks").valueOf();o.setTime(n),e.$emit("pick",[o,t])}},{text:this.$t("sys.manage.log.onemonth"),onClick:function(e){var t=new Date,o=new Date,n=l()().add(-1,"months").valueOf();o.setTime(n),e.$emit("pick",[o,t])}},{text:this.$t("sys.manage.log.threemonth"),onClick:function(e){var t=new Date,o=new Date,n=l()().add(-3,"months").valueOf();o.setTime(n),e.$emit("pick",[o,t])}}]}},created:function(){this.listPage()},methods:{doChangePage:function(e){this.pageData.pageNo=e,this.listPage()},doSizeChange:function(e){this.pageData.pageSize=e,this.listPage()},doPageSort:function(e){this.pageData.pageOrderName=e.prop,this.pageData.pageOrderBy=e.order,this.listPage()},listPage:function(){var e=this;this.listLoading=!0,this.searchDate?this.pageData.searchDate=this.searchDate.toString():this.pageData.searchDate="",this.$axios.$post("/platform/sys/log/list",this.pageData).then((function(t){e.listLoading=!1,0===t.code&&(e.listData=t.data.list,e.pageData.totalCount=t.data.totalCount)}))},doSearch:function(){this.pageData.pageNo=1,this.listPage()}}},c=(o(701),o(11)),component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"platform-content"},[o("h4",{staticClass:"platform-content-title"},[o("span",[e._v(e._s(e.$t("sys.manage.log")))])]),e._v(" "),o("div",{staticClass:"platform-content-info"},[o("div",{staticClass:"platform-content-search"},[o("el-form",{staticClass:"platform-content-search-form",attrs:{inline:!0,model:e.pageData}},[o("el-form-item",{attrs:{label:e.$t("sys.manage.log.form.type")}},[o("el-select",{attrs:{placeholder:e.$t("sys.manage.log.form.type"),size:"medium"},model:{value:e.pageData.searchType,callback:function(t){e.$set(e.pageData,"searchType",t)},expression:"pageData.searchType"}},e._l(e.logType,(function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("sys.manage.log.form.date")}},[o("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions,"range-separator":e.$t("el.datepicker.to"),"start-placeholder":e.$t("el.datepicker.startDate"),"end-placeholder":e.$t("el.datepicker.endDate"),align:"right",size:"medium","default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.searchDate,callback:function(t){e.searchDate=t},expression:"searchDate"}})],1),e._v(" "),o("div",{staticClass:"platform-content-search-op"},[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.doSearch}},[e._v("\n            "+e._s(e.$t("system.commons.button.search"))+"\n          ")])],1)],1)],1),e._v(" "),o("div",{staticClass:"platform-content-list"},[o("div",{staticClass:"platform-content-list-table"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.listData,"default-sort":{prop:"createdAt",order:"descending"},stripe:""},on:{"sort-change":e.doPageSort}},[o("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:"",size:"mini"}},[o("el-form-item",{attrs:{label:e.$t("sys.manage.log.form.param")}},[o("span",[e._v("\n                    "+e._s(t.row.param||e.$t("el.table.emptyText")))])]),e._v(" "),o("el-form-item",{attrs:{label:e.$t("sys.manage.log.form.result")}},[o("span",[e._v("\n                    "+e._s(t.row.result||e.$t("el.table.emptyText")))])])],1)]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"loginname",label:e.$t("system.commons.txt.createdBy"),sortable:"","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.loginname)+"("+e._s(t.row.username)+")\n            ")]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"createdAt",label:e.$t("system.commons.txt.createdAt"),sortable:"","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.createdat?o("span",[e._v(e._s(e._f("moment")(t.row.createdat,"datetime")))]):e._e(),e._v(" "),t.row.createdAt?o("span",[e._v(e._s(e._f("moment")(t.row.createdAt,"datetime")))]):e._e()]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"type",label:e.$t("sys.manage.log.form.type"),"header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["platform"==t.row.type?o("span",[e._v("\n                "+e._s(e.$t("sys.manage.log.form.type.platform"))+"\n              ")]):e._e(),e._v(" "),"info"==t.row.type?o("span",[e._v("\n                "+e._s(e.$t("sys.manage.log.form.type.info"))+"\n              ")]):e._e(),e._v(" "),"api"==t.row.type?o("span",[e._v("\n                "+e._s(e.$t("sys.manage.log.form.type.api"))+"\n              ")]):e._e()]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"tag",label:e.$t("sys.manage.log.form.tag"),"header-align":"center",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{prop:"src",label:e.$t("sys.manage.log.form.src"),"header-align":"left","show-overflow-tooltip":!0}}),e._v(" "),o("el-table-column",{attrs:{prop:"msg",label:e.$t("sys.manage.log.form.msg"),"header-align":"left","show-overflow-tooltip":!0}}),e._v(" "),o("el-table-column",{attrs:{prop:"ip",label:"IP","header-align":"left","show-overflow-tooltip":!0}})],1)],1),e._v(" "),o("div",{staticClass:"platform-content-list-pagination"},[o("el-pagination",{staticClass:"platform-pagenation",attrs:{"current-page":e.pageData.pageNo,"page-size":e.pageData.pageSize,total:e.pageData.totalCount,background:"","page-sizes":[10,20,30,50],layout:"sizes, prev, pager, next"},on:{"current-change":e.doChangePage,"size-change":e.doSizeChange}})],1)])])])}),[],!1,null,null,null);t.default=component.exports}}]);